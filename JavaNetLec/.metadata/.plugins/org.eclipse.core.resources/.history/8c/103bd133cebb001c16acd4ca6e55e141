package net.ex01.echoserver;

import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

/*
서버는 서비스를 제공하는 프로세스를 일컫는다.

TCP > UDP
1) 접속할 전화기가 필요(소켓 생성)
2) 고정된 주소를 가진다(bind - 전화기에 전화번호 부여)
3) 접속 요청하는 클라이언트를 받아줘야 한다(accept)
4) 요청을 받아들이면 송수신 스트림이 개통된다
5) 스트림이 개통되면 통신이 가능하다
6) close를 호출하면 스트림이 해제된다
*/

public class EchoServer {
	public static void main(String[] args) throws IOException {
		// 1) 소켓 생성(휴대폰 구매)
		//    ip/port가 필요한데
		//    ip는 현재 Host의 ip를 자동할당
		//    대신 port는 정해줘야 한다(9000)
		ServerSocket serverSocket = new ServerSocket(9000);
		
		// 2) 클라이언트의 접속을 기다린다
		// accpet()를 호출하면 대기하고 있다가 클라이언트가 접속연결되면
		// accetp()는 클라이언트와 연결된 새로운 연결소켓을 반환한다
		System.out.println("Wait client...");
		Socket conSocket = serverSocket.accept();
		
		// 3) 연결소켓으로 통신을 할 수 있다
		OutputStream out = conSocket.getOutputStream();
		OutputStreamWriter outW = new OutputStreamWriter(out);
		PrintWriter pw = new PrintWriter(outW);
	}
}













